{"version":3,"file":"1467.js","mappings":"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","sources":["webpack://brojoon/./components/LeftSideBar/style.ts","webpack://brojoon/./components/LeftSideBar/index.tsx","webpack://brojoon/./layouts/Content/style.ts","webpack://brojoon/./layouts/Content/index.tsx","webpack://brojoon/./utils/config.ts","webpack://brojoon/./utils/fetcher.ts","webpack://brojoon/./utils/useSocket.ts"],"sourcesContent":["import styled from '@emotion/styled';\r\nimport Badge from '@mui/material/Badge';\r\nimport { styled as muiStyled } from '@mui/material/styles';\r\nimport Fab from '@mui/material/Fab';\r\n\r\n\r\nexport const LeftSideBarContainer = styled.div`\r\n\twidth: 55px;\r\n\tflex-shrink: 0;\r\n\tborder-right: '5px solid #121212';\r\n\r\n\t& .fab-wrapper {\r\n\t\tbackground: #4d4d4d;\r\n\t\tmargin-top: 8px;\r\n\t\twidth: 30px;\r\n\t\theight: 1px;\r\n\t}\r\n`;\r\n\r\nexport const Toolbar = styled.div`\r\n\tposition: fixed;\r\n\tleft : 0;\r\n\theight : 100%;\r\n\twidth: 55px;\r\n\tbackground-color: #363636;\r\n\tfont-size: 50px;\r\n\tdisplay: flex;\r\n`;\r\n\r\nexport const NavIcons = styled.div`\r\n\twidth: 50px;\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tflex-direction: column;\r\n\tmargin-top: 15px;\r\n\r\n\t.sideBarIcon {\r\n\t\tfont-size: 28px;\r\n\t\twidth: 45px;\r\n\t\theight: 45px;\r\n\t\tbox-shadow: none;\r\n\t\tmargin-top: 10px;\r\n\t}\r\n\r\n\t.sideBarIcon:hover {\r\n\t\tbackground-color: #4a4b54;\r\n\r\n\r\n\t}\t\r\n\t\r\n\t.sideBarIconLast {\r\n\t\tposition: fixed;\r\n\t\tbottom: 5px;\r\n\t\tleft: 5px;\r\n\t\twidth: 45px;\r\n\t\theight: 45px;\r\n\t\tbox-shadow: none;\r\n\t}\r\n\r\n\t.sideBarIconLast:hover {\r\n\t\tbackground-color: #4a4b54;\r\n\r\n\t}\r\n\t\r\n`;\r\n\r\nexport const StyledBadge = muiStyled(Badge)(({ theme }) => ({\r\n\tmarginBottom: '15px',\r\n\tcursor: 'pointer',\r\n\t'& .MuiBadge-badge': {\r\n\t\tbackgroundColor: '#44b700',\r\n\t\tcolor: '#44b700',\r\n\t\tboxShadow: `0 0 0 2px ${theme.palette.background.paper}`,\r\n\t\t'&::after': {\r\n\t\t\tposition: 'absolute',\r\n\t\t\ttop: 0,\r\n\t\t\tleft: 0,\r\n\t\t\tborderRadius: '50%',\r\n\t\t\tanimation: 'ripple 1.2s infinite ease-in-out',\r\n\t\t\tborder: '1px solid currentColor',\r\n\t\t\tcontent: '\"\"',\r\n\t\t},\r\n\t},\r\n\t'@keyframes ripple': {\r\n\t\t'0%': {\r\n\t\t\ttransform: 'scale(.8)',\r\n\t\t\topacity: 1,\r\n\t\t},\r\n\t\t'100%': {\r\n\t\t\ttransform: 'scale(2.4)',\r\n\t\t\topacity: 0,\r\n\t\t},\r\n\t},\r\n}));\r\n\r\nexport const MyFab = styled(Fab) <{ selected: boolean }>`\r\n\tbackground-color: ${(props) => props.selected ? '#4a4b54' : '#363636'};\r\n\tbox-shadow: 0;\r\n\tcolor: white;\r\n\r\n`;\r\n","import React, { useCallback, useState } from 'react';\r\nimport { MyFab, NavIcons, StyledBadge, Toolbar, LeftSideBarContainer } from './style';\r\nimport ForumIcon from '@mui/icons-material/Forum';\r\nimport VideogameAssetIcon from '@mui/icons-material/VideogameAsset';\r\nimport ConnectWithoutContactIcon from '@mui/icons-material/ConnectWithoutContact';\r\nimport GroupIcon from '@mui/icons-material/Group';\r\nimport LogoutIcon from '@mui/icons-material/Logout';\r\nimport Avatar from '@mui/material/Avatar';\r\nimport { Link, useHistory } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport { toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport useSWR from 'swr';\r\nimport { IUser } from '@typings/db';\r\nimport fetcher from '@utils/fetcher';\r\nimport Tooltip from '@mui/material/Tooltip';\r\nimport MilitaryTechIcon from '@mui/icons-material/MilitaryTech';\r\nimport Scrollbars from 'react-custom-scrollbars';\r\nimport DashboardSharpIcon from '@mui/icons-material/DashboardSharp';\r\nimport getSocket from '@utils/useSocket';\r\nimport config from '@utils/config';\r\nconst LeftSideBar = () => {\r\n  const { data, mutate } = useSWR<IUser | null>('/api/users', fetcher);\r\n\r\n  const [selectedIndex, setSelectedIndex] = useState(-1);\r\n\r\n  const history = useHistory();\r\n\r\n  const handleListItemClick = (event: any, index: number) => {\r\n    setSelectedIndex(index);\r\n  };\r\n\r\n  const onClickLogOut = useCallback(() => {\r\n    axios\r\n      .get('/api/auth/logout', config)\r\n      .then(() => {\r\n        getSocket().disconnect();\r\n        history.push('/login');\r\n      })\r\n      .catch((error) => {\r\n        if (error.response.data.code === 401) {\r\n          history.push('/login');\r\n        } else {\r\n          toast.error(error.message, {\r\n            autoClose: 4000,\r\n            position: toast.POSITION.TOP_RIGHT,\r\n            hideProgressBar: false,\r\n            closeOnClick: true,\r\n            pauseOnHover: true,\r\n            theme: 'colored',\r\n          });\r\n        }\r\n      });\r\n  }, []);\r\n  return (\r\n    <LeftSideBarContainer>\r\n      <Toolbar>\r\n        <Scrollbars>\r\n          <NavIcons>\r\n            <Link to={`/profile`}>\r\n              <Tooltip title=\"Profile\" placement=\"right\" arrow>\r\n                <StyledBadge\r\n                  className=\"sideBarProfileIcon\"\r\n                  onClick={(e) => {\r\n                    handleListItemClick(e, -1);\r\n                  }}\r\n                  overlap=\"circular\"\r\n                  anchorOrigin={{ vertical: 'bottom', horizontal: 'right' }}\r\n                  variant=\"dot\"\r\n                >\r\n                  <Avatar src={data?.profile} alt=\"Avatar\" />\r\n                </StyledBadge>\r\n              </Tooltip>\r\n            </Link>\r\n            <div className=\"fab-wrapper\"></div>\r\n            <Link to={`/home`}>\r\n              <Tooltip title=\"Home\" placement=\"right\" arrow>\r\n                <MyFab\r\n                  aria-label=\"add\"\r\n                  className=\"sideBarIcon\"\r\n                  selected={selectedIndex === 0}\r\n                  onClick={(e) => {\r\n                    handleListItemClick(e, 0);\r\n                  }}\r\n                >\r\n                  <DashboardSharpIcon />\r\n                </MyFab>\r\n              </Tooltip>\r\n            </Link>\r\n            <Link to={`/social`}>\r\n              <Tooltip title=\"Social\" placement=\"right\" arrow>\r\n                <MyFab\r\n                  aria-label=\"add\"\r\n                  className=\"sideBarIcon\"\r\n                  selected={selectedIndex === 1}\r\n                  onClick={(e) => {\r\n                    handleListItemClick(e, 1);\r\n                  }}\r\n                >\r\n                  <ConnectWithoutContactIcon />\r\n                </MyFab>\r\n              </Tooltip>\r\n            </Link>\r\n            <Link to={`/channels`}>\r\n              <Tooltip title=\"Channels\" placement=\"right\" arrow>\r\n                <MyFab\r\n                  aria-label=\"add\"\r\n                  className=\"sideBarIcon\"\r\n                  selected={selectedIndex === 2}\r\n                  onClick={(e) => {\r\n                    handleListItemClick(e, 2);\r\n                  }}\r\n                >\r\n                  <ForumIcon />\r\n                </MyFab>\r\n              </Tooltip>\r\n            </Link>\r\n            <Link to={`/users`}>\r\n              <Tooltip title=\"Users\" placement=\"right\" arrow>\r\n                <MyFab\r\n                  aria-label=\"add\"\r\n                  className=\"sideBarIcon\"\r\n                  selected={selectedIndex === 3}\r\n                  onClick={(e) => {\r\n                    handleListItemClick(e, 3);\r\n                  }}\r\n                >\r\n                  <GroupIcon />\r\n                </MyFab>\r\n              </Tooltip>\r\n            </Link>\r\n            <Link to={`/achievements`}>\r\n              <Tooltip title=\"Achievements\" placement=\"right\" arrow>\r\n                <MyFab\r\n                  aria-label=\"add\"\r\n                  className=\"sideBarIcon\"\r\n                  selected={selectedIndex === 4}\r\n                  onClick={(e) => {\r\n                    handleListItemClick(e, 4);\r\n                  }}\r\n                >\r\n                  <MilitaryTechIcon />\r\n                </MyFab>\r\n              </Tooltip>\r\n            </Link>\r\n            <Link to={`/game`}>\r\n              <Tooltip title=\"Game\" placement=\"right\" arrow>\r\n                <MyFab\r\n                  aria-label=\"add\"\r\n                  className=\"sideBarIcon\"\r\n                  selected={selectedIndex === 5}\r\n                  onClick={(e) => {\r\n                    handleListItemClick(e, 5);\r\n                  }}\r\n                >\r\n                  <VideogameAssetIcon />\r\n                </MyFab>\r\n              </Tooltip>\r\n            </Link>\r\n\r\n            <Tooltip title=\"Logout\" placement=\"right\" arrow>\r\n              <MyFab\r\n                aria-label=\"add\"\r\n                className=\"sideBarIconLast\"\r\n                selected={selectedIndex === 6}\r\n                onClick={onClickLogOut}\r\n              >\r\n                <LogoutIcon />\r\n              </MyFab>\r\n            </Tooltip>\r\n          </NavIcons>\r\n        </Scrollbars>\r\n      </Toolbar>\r\n    </LeftSideBarContainer>\r\n  );\r\n};\r\n\r\nexport default LeftSideBar;\r\n","import styled from '@emotion/styled';\r\n\r\nexport const Container = styled.div`\r\n\tdisplay: flex;\r\n\r\n`;","import React, { useEffect, useContext } from 'react';\r\nimport LeftSideBar from '@components/LeftSideBar';\r\nimport loadable from '@loadable/component';\r\nimport { IUser, IAllUser } from '@typings/db';\r\nimport fetcher from '@utils/fetcher';\r\nimport { Route, Switch, useHistory, Link } from 'react-router-dom';\r\nimport useSWR from 'swr';\r\nimport { Container } from './style';\r\nimport getSocket from '@utils/useSocket';\r\nimport { SocketContext } from '@store/socket';\r\nimport { toast } from 'react-toastify';\r\n\r\nconst Home = loadable(() => import('@pages/Home'));\r\nconst Social = loadable(() => import('@pages/Social'));\r\nconst Channels = loadable(() => import('@pages/Channels'));\r\nconst Profile = loadable(() => import('@pages/Profile'));\r\nconst Users = loadable(() => import('@pages/Users'));\r\nconst Achievements = loadable(() => import('@pages/Achievements'));\r\nconst Game = loadable(() => import('@pages/Game'));\r\nconst ProfileSetting = loadable(() => import('@pages/ProfileSetting'));\r\n\r\nconst Content = () => {\r\n  const { data: myData } = useSWR<IUser | null>('/api/users', fetcher);\r\n  const { data: DMList } = useSWR<number[]>('/api/dms/dmlistOnlyIdJustArray', fetcher);\r\n  const { data: ChannelList } = useSWR<number[]>('/api/channels/myChannelListOnlyId', fetcher);\r\n  const { data: allUser } = useSWR<IAllUser[], any[]>('/api/users/alluser', fetcher);\r\n\r\n  const { setOnlineList, setOnGameList } = useContext(SocketContext);\r\n\r\n  const history = useHistory();\r\n\r\n  if (myData && myData.username === '') {\r\n    history.push('/login/first-step');\r\n  }\r\n\r\n  const socket = getSocket();\r\n\r\n  useEffect(() => {\r\n    socket?.on('onGameList', (data: any) => {\r\n      setOnGameList(data);\r\n      console.log(data);\r\n      console.log('onGameList !!!');\r\n    });\r\n    return () => {\r\n      socket.off('onGameList');\r\n    };\r\n  }, [socket]);\r\n\r\n  useEffect(() => {\r\n    socket?.on('onlineList', (data: any) => {\r\n      setOnlineList(data);\r\n    });\r\n\r\n    return () => {\r\n      socket.off('onlineList');\r\n    };\r\n  }, [socket]);\r\n\r\n  useEffect(() => {\r\n    if (DMList && ChannelList && myData) {\r\n      socket.emit('login', {\r\n        userId: myData.userId,\r\n        username: myData.username,\r\n        Dms: DMList,\r\n        channels: ChannelList,\r\n      });\r\n    }\r\n  }, [socket, DMList, ChannelList, myData]);\r\n\r\n  useEffect(() => {\r\n    socket?.on('notice', (data: any) => {\r\n      if (data.match === 3) {\r\n        toast.info(`${data.username}가 게임을 신청 했습니다 DM을 확인해주세요..!`, {\r\n          autoClose: 7000,\r\n          position: toast.POSITION.TOP_RIGHT,\r\n          hideProgressBar: false,\r\n          closeOnClick: true,\r\n          pauseOnHover: true,\r\n          theme: 'dark',\r\n        });\r\n      } else if (data.match === 1) {\r\n        toast.info(`${data.username}과의 매치가 성사 되었습니다..!`, {\r\n          autoClose: 3000,\r\n          position: toast.POSITION.TOP_CENTER,\r\n          hideProgressBar: false,\r\n          closeOnClick: true,\r\n          pauseOnHover: true,\r\n          theme: 'dark',\r\n        });\r\n      }\r\n    });\r\n\r\n    return () => {\r\n      socket.off('notice');\r\n    };\r\n  }, [socket, allUser]);\r\n\r\n  if (!myData) return null;\r\n\r\n  return (\r\n    <Container>\r\n      <LeftSideBar />\r\n      <Switch>\r\n        <Route exact path=\"/home\" component={Home} />\r\n        <Route path=\"/social\" component={Social} />\r\n        <Route path=\"/channels\" component={Channels} />\r\n        <Route exact path=\"/users/:id\" component={Profile} />\r\n        <Route exact path=\"/users\" component={Users} />\r\n        <Route exact path=\"/achievements\" component={Achievements} />\r\n        <Route path=\"/game\" component={Game} />\r\n        <Route exact path=\"/profile/setting\" component={ProfileSetting} />\r\n        <Route exact path=\"/profile\" component={Profile} />\r\n      </Switch>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default Content;\r\n","import getToken from '@utils/getToken';\r\n\r\nconst config = {\r\n\twithCredentials: true,\r\n\t// headers: {\r\n\t// \tAuthorization: `Bearer ${getToken()}`,\r\n\t// }\r\n}\r\n\r\nexport default config","import axios from 'axios';\r\nimport { toast } from 'react-toastify';\r\nimport { useHistory } from 'react-router-dom';\r\n\r\n\r\nconst fetcher = (url: string): any => axios.get(url, {\r\n\twithCredentials: true,\r\n\t// headers: {\r\n\t// \tAuthorization: `Bearer ${getToken()}`,\r\n\t// }\r\n}).then((response) => response.data).catch((error) => {\r\n\r\n\ttoast.error(error.message, {\r\n\t\tautoClose: 4000,\r\n\t\tposition: toast.POSITION.TOP_RIGHT,\r\n\t\thideProgressBar: false,\r\n\t\tcloseOnClick: true,\r\n\t\tpauseOnHover: true,\r\n\t\ttheme: \"colored\"\r\n\t});\r\n\tif (error.response.data.code === 401) {\r\n\t\tsetTimeout(() => {\r\n\t\t\twindow.location.href = '/login';\r\n\t\t}, 4000);\r\n\r\n\t\t// const history = useHistory();\r\n\t\t// history.push('/login');\r\n\t} else if (error.response.data.data.message === \"ban 유저\") {\r\n\t\tsetTimeout(() => {\r\n\t\t\twindow.location.href = '/login';\r\n\t\t}, 4000);\r\n\t} else {\r\n\r\n\t\tsetTimeout(() => {\r\n\t\t\twindow.location.href = '/home';\r\n\t\t}, 4000);\r\n\t}\r\n\treturn false;\r\n\r\n})\r\n\r\nexport default fetcher;","import io from 'socket.io-client';\r\nimport { useCallback } from 'react';\r\n\r\nlet socket: any = undefined;\r\n\r\nconst getSocket = (() => {\r\n\r\n\tif (!socket) {\r\n\t\tsocket = io.connect('http://localhost:3095');\r\n\t}\r\n\r\n\treturn socket;\r\n})\r\n\r\nexport default getSocket;"],"names":["LeftSideBarContainer","styled","Toolbar","NavIcons","StyledBadge","muiStyled","Badge","theme","marginBottom","cursor","backgroundColor","color","boxShadow","palette","background","paper","position","top","left","borderRadius","animation","border","content","transform","opacity","MyFab","Fab","props","selected","useSWR","fetcher","data","mutate","useState","selectedIndex","setSelectedIndex","history","useHistory","handleListItemClick","event","index","onClickLogOut","useCallback","axios","config","then","getSocket","disconnect","push","catch","error","response","code","toast","message","autoClose","hideProgressBar","closeOnClick","pauseOnHover","to","Tooltip","title","placement","arrow","className","onClick","e","overlap","anchorOrigin","vertical","horizontal","variant","Avatar","src","profile","alt","DashboardSharp","ConnectWithoutContact","Forum","Group","MilitaryTech","VideogameAsset","Logout","Container","Home","loadable","Social","Channels","Profile","Users","Achievements","Game","ProfileSetting","myData","DMList","ChannelList","allUser","useContext","SocketContext","setOnlineList","setOnGameList","username","socket","useEffect","on","console","log","off","emit","userId","Dms","channels","match","exact","path","component","withCredentials","url","setTimeout","window","location","href","undefined","io"],"sourceRoot":""}