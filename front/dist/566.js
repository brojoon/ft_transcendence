(self.webpackChunkbrojoon=self.webpackChunkbrojoon||[]).push([[566],{8718:function(t,e,n){"use strict";var r=n(5318);e.Z=void 0;var a=r(n(4938)),o=n(5893),i=(0,a.default)([(0,o.jsx)("circle",{cx:"12",cy:"4",r:"2"},"0"),(0,o.jsx)("path",{d:"M15.89 8.11C15.5 7.72 14.83 7 13.53 7h-2.54c-2.46-.01-4.51-1.8-4.92-4.15-.08-.49-.49-.85-.98-.85-.61 0-1.09.54-1 1.14C4.53 5.8 6.47 7.95 9 8.71V21c0 .55.45 1 1 1s1-.45 1-1v-5h2v5c0 .55.45 1 1 1s1-.45 1-1V10.05l3.24 3.24c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41l-3.76-3.77z"},"1")],"EmojiPeopleRounded");e.Z=i},8619:function(t,e,n){"use strict";var r=n(3366),a=n(7462),o=n(7294),i=(n(5697),n(6010)),l=n(7463),c=n(1796),u=n(9602),s=n(6122),d=n(6637),f=n(8974),p=n(1705),m=n(9773),h=n(8686),v=n(5893);const g=["alignItems","autoFocus","component","children","dense","disableGutters","divider","focusVisibleClassName","selected"],b=(0,u.ZP)(d.Z,{shouldForwardProp:t=>(0,u.FO)(t)||"classes"===t,name:"MuiListItemButton",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.dense&&e.dense,"flex-start"===n.alignItems&&e.alignItemsFlexStart,n.divider&&e.divider,!n.disableGutters&&e.gutters]}})((({theme:t,ownerState:e})=>(0,a.Z)({display:"flex",flexGrow:1,justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",boxSizing:"border-box",textAlign:"left",paddingTop:8,paddingBottom:8,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:t.palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${h.Z.selected}`]:{backgroundColor:(0,c.Fq)(t.palette.primary.main,t.palette.action.selectedOpacity),[`&.${h.Z.focusVisible}`]:{backgroundColor:(0,c.Fq)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},[`&.${h.Z.selected}:hover`]:{backgroundColor:(0,c.Fq)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(0,c.Fq)(t.palette.primary.main,t.palette.action.selectedOpacity)}},[`&.${h.Z.focusVisible}`]:{backgroundColor:t.palette.action.focus},[`&.${h.Z.disabled}`]:{opacity:t.palette.action.disabledOpacity}},e.divider&&{borderBottom:`1px solid ${t.palette.divider}`,backgroundClip:"padding-box"},"flex-start"===e.alignItems&&{alignItems:"flex-start"},!e.disableGutters&&{paddingLeft:16,paddingRight:16},e.dense&&{paddingTop:4,paddingBottom:4}))),y=o.forwardRef((function(t,e){const n=(0,s.Z)({props:t,name:"MuiListItemButton"}),{alignItems:c="center",autoFocus:u=!1,component:d="div",children:y,dense:x=!1,disableGutters:w=!1,divider:Z=!1,focusVisibleClassName:E,selected:k=!1}=n,O=(0,r.Z)(n,g),I=o.useContext(m.Z),S={dense:x||I.dense||!1,alignItems:c,disableGutters:w},C=o.useRef(null);(0,f.Z)((()=>{u&&C.current&&C.current.focus()}),[u]);const A=(0,a.Z)({},n,{alignItems:c,dense:S.dense,disableGutters:w,divider:Z,selected:k}),M=(t=>{const{alignItems:e,classes:n,dense:r,disabled:o,disableGutters:i,divider:c,selected:u}=t,s={root:["root",r&&"dense",!i&&"gutters",c&&"divider",o&&"disabled","flex-start"===e&&"alignItemsFlexStart",u&&"selected"]},d=(0,l.Z)(s,h.t,n);return(0,a.Z)({},n,d)})(A),j=(0,p.Z)(C,e);return(0,v.jsx)(m.Z.Provider,{value:S,children:(0,v.jsx)(b,(0,a.Z)({ref:j,component:d,focusVisibleClassName:(0,i.Z)(M.focusVisible,E),ownerState:A},O,{classes:M,children:y}))})}));e.Z=y},1467:function(t,e,n){"use strict";n.d(e,{Z:function(){return s}});var r,a,o,i=n(7294),l=n(6307),c=n(4524).Z.div(r||(a=["\n\theight: 60px;\n\tbackground-color: #272727;\n\tpadding: 20px 6px 3px 16px;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\n\t& .chat-box-form {\n\t\twidth: 100%;\n\t\tdisplay: flex;\n\t\tflex-direction: row;\n\t}\n\n\t& .chat-box-input {\n\t\twidth: 95%;\n\t\toutline: none;\n\t\tresize: none;\n\t\tborder-radius: 4px;\n\t\tbackground: #bdbdbd;\n\t\tfont-size: 16px;\n\t\tfont-weight: bold;\n\t\tfont-family: monospace;\n\t\theight: 37px;\n\t\tcolor: black;\n\t\tborder: none;\n\t\tpadding: 10px;\n\t}\n\n\t& .submit-btn {\n\t\tbackground: #272727;\n\t\tbox-shadow: none;\n\t\tborder: none;\n\t\tcolor: white;\n\t\tmargin-left: 10px;\n\t\tcursor: pointer;\n\t}\n"],o||(o=a.slice(0)),r=Object.freeze(Object.defineProperties(a,{raw:{value:Object.freeze(o)}}))));function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var s=function(t){var e,n,r=t.chat,a=t.onSubmitChat,o=t.setChat,s=(e=(0,i.useState)(""),n=2,function(t){if(Array.isArray(t))return t}(e)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,a,o=[],i=!0,l=!1;try{for(n=n.call(t);!(i=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);i=!0);}catch(t){l=!0,a=t}finally{try{i||null==n.return||n.return()}finally{if(l)throw a}}return o}}(e,n)||function(t,e){if(t){if("string"==typeof t)return u(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(t,e):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),d=s[0],f=s[1],p=(0,i.useCallback)((function(t){f(t.target.value)}),[]);(0,i.useEffect)((function(){r&&(a(),f(""))}),[r,a]);var m=(0,i.useCallback)((function(t){t.preventDefault(),o(d)}),[d,a]);return i.createElement(c,null,i.createElement("form",{className:"chat-box-form"},i.createElement("input",{className:"chat-box-input",value:d,onChange:p}),i.createElement("button",{className:"submit-btn",onClick:m},i.createElement(l.Z,null))))}},4126:function(t,e,n){"use strict";n.d(e,{Z:function(){return C}});var r,a,o,i,l=n(7294),c=n(9334),u=n(1298),s=n(2440),d=n(3564),f=n(2503),p=n(3727),m=n(8718),h=n(8619),v=n(4524),g=n(7109);function b(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var y,x=v.Z.div(r||(r=b(["\n\twidth: 300px;\n\theight: 100%;\n\tpadding: 30px 15px;\n\tbackground-color: #363636;\n\tborder-right: 1px solid #4f4f4f;\n\toverflow: hidden;\n\n\t& .search-input {\n\t\twidth: 100%;\n\t\toutline: none;\n\t\tresize: none;\n\t\tborder-radius: 4px;\n\t\tbackground: #bdbdbd;\n\t\tfont-size: 16px;\n\t\tfont-weight: bold;\n\t\tfont-family: monospace;\n\t\theight: 40px;\n\t\tcolor: black;\n\t\tborder: none;\n\t\tpadding: 0 12px;\n\t}\n\n\t& .friend-icon-wrapper {\n\t\tborder-top: 1px solid #4f4f4f;\n\t\tborder-bottom: 1px solid #4f4f4f;\n\t\tmargin: 10px 0;\n\t\tpadding: 14px 0 0;\n\t\theight: 80px;\n\t}\n\n\t& .css-cvhtoe-MuiButtonBase-root-MuiListItemButton-root.Mui-selected {\n\t\tbackground-color: #666666 !important;\n\t}\n\n\t& .friend-list-wrapper {\n\t\tmargin: 0;\n\t\tpadding: 0;\n\t}\n\n\t& .friend-list-wrapper:hover {\n\t\tbackground-color: rgba(74,75,84,0.7);\n\t}\n\n\t& .friend-list-btn {\n\t\tcolor: white;\n\t}\n\n\t& .friend-list-icon {\n\t\tmargin-right: 20px;\n\t}\n"]))),w=v.Z.div(a||(a=b(["\n\theight: 79%;\n\n\t& .list {\n\t\tpadding: 0;\n\t\tmargin: 0;\n\t}\n\n\t& .css-cvhtoe-MuiButtonBase-root-MuiListItemButton-root.Mui-selected {\n\t\tbackground-color: #666666 !important;\n\t}\n\n\t& .list:hover {\n\t\tbackground-color: rgba(74,75,84,0.7);\n\t}\n\n\t& .list-item-button {\n\t\tpadding: 8px;\n\t}\n\n\t& .user-avatar-id-wrapper {\n\t\tdisplay: flex;\n\n\t\talign-items: center;\n\t}\n\n\n\t& .user-id {\n\t\tmargin-left: 12px;\n\t\tcolor: white;\n\t}\n\n\n"]))),Z=(0,v.Z)(g.Z)(o||(o=b(["\n\tborder: ",";\n\tmargin-left: 0;\n"])),(function(t){return t.isstate})),E=v.Z.div(i||(i=b(["\n  ...style;\n  background-color: #787c7f;\n  width: 8px;\n  border-radius: 5px;\n\n\t&:hover {\n\t\tbackground-color: white;\n\t}\n"]))),k=n(6103),O=["style"];function I(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,a,o=[],i=!0,l=!1;try{for(n=n.call(t);!(i=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);i=!0);}catch(t){l=!0,a=t}finally{try{i||null==n.return||n.return()}finally{if(l)throw a}}return o}}(t,e)||function(t,e){if(t){if("string"==typeof t)return S(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?S(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var C=function(){var t,e,n=(0,f.ZP)("/api/dms/dmlist",d.Z).data,r=(0,f.ZP)("/api/users/alluser",d.Z).data,a=(0,f.ZP)("/api/friend/blocklist",d.Z).data,o=I((0,l.useState)(0),2),i=o[0],v=o[1],g=I((0,l.useState)(""),2),b=g[0],S=g[1],C=(0,l.useContext)(k.J),A=C.onlineList,M=C.onGameList,j=(0,l.useCallback)((function(t,e){v(e)}),[i,v]),D=(0,l.useCallback)((function(t){S(t.target.value)}),[]);b&&-1===b.indexOf("\\")&&(y=null==n?void 0:n.filter((function(t){var e=new RegExp(b,"gi");return t.username.match(e)})));var P=(0,l.useCallback)((function(t){return t?y:n}),[n]);return l.createElement(x,null,l.createElement("input",{className:"search-input",onChange:D,value:b,autoComplete:"off"}),l.createElement("div",{className:"friend-icon-wrapper"},l.createElement(p.rU,{to:"/social"},l.createElement(s.Z,{className:"friend-list-wrapper",component:"nav","aria-label":"main mailbox folders"},l.createElement(h.Z,{className:"friend-list-btn",selected:0===i,onClick:function(t){return j(t,0)}},l.createElement(m.Z,{className:"friend-list-icon"}),l.createElement(c.Z,{primary:"Friends"}))))),l.createElement(w,null,l.createElement(u.ZP,{autoHide:!0,renderThumbVertical:function(t){t.style;var e=function(t,e){if(null==t)return{};var n,r,a=function(t,e){if(null==t)return{};var n,r,a={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(a[n]=t[n]);return a}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}(t,O);return l.createElement(E,e)}},l.createElement("div",null,null===(t=P(b))||void 0===t?void 0:t.map((function(t,n){var o=!1;if(null==a||a.map((function(e){e.userId2===t.userId&&(o=!0)})),!o)return l.createElement(p.rU,{to:"/social/dm/".concat(t.id),key:t.id},l.createElement(s.Z,{className:"list",component:"nav","aria-label":"main mailbox folders"},l.createElement(h.Z,{className:"list-item-button",selected:i===n+1,onClick:function(t){return j(t,n+1)}},null==r?void 0:r.map((function(n){if(n.userId===t.userId)return e=0,M&&M[n.userId]&&(e=2),0===e&&(null==A||A.map((function(t){t.userId===n.userId&&(e=1)}))),l.createElement("div",{className:"user-avatar-id-wrapper",key:t.id},l.createElement(Z,{isstate:"".concat(e?1===e?"2px solid #1ed14b":"2px solid #FFD400":"2px solid #d63638"),src:n.profile,alt:"Avatar"}),l.createElement(c.Z,{className:"user-id",primary:n.username}))})))))}))))))}},9566:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return W}});var r,a,o,i,l,c,u=n(1467),s=n(7294),d=n(3720),f=n(4386),p=n(2658),m=n(2642),h=n(7109),v=n(2503),g=n(3564),b=n(5977),y=n(9529),x=n(9669),w=n.n(x),Z=n(175),E=n(4524),k=n(1508),O=(0,E.Z)(k.Z)(r||(a=["\n\tflex-grow: 1;\n\n\t& .wrapper {\n\t\tposition: static;\n\t\tbackground-color: #272727;\n\t}\n\n\t& .user-profile-container {\n\t\tflex-grow: 1;\n\t}\n\n\t& .user-profile-wrapper {\n\t\tdisplay: flex;\n\t\tflex-direction: row;\n\t\talign-items: center;\n\t\twhite-space: nowrap;\n\t}\n\n\t& .avatar {\n\t\twidth: 40px;\n\t\theight: 40px;\n\t\tleft: -10px;\n\t}\n\n\t& .challenge-btn {\n\t\tbackground-color: rgba(22, 120, 209, 0.8);\n\t\tcolor: white;\n\t\twidth: 160px;\n\t\theight: 35px;\n\t\tpadding: 0 16px;\n\t\tfont-weight: bold;\n\t}\n\n\t& .challenge-btn:hover\t {\n\t\tbackground-color: rgba(22, 120, 209, 1);\n\t}\n\n\n\t& .challenge-block-btn {\n\t\twidth: 160px;\n\t\theight: 35px;\n\t\tpadding: 0 16px;\n\t\tbackground-color: #393939;\n\t\tfont-weight: bold;\n\t}\n\t& .watch-btn {\n\t\twidth: 160px;\n\t\theight: 35px;\n\t\tbackground-color: rgba(255, 212, 0, 0.9);\n\t\tfont-weight: bold;\n\t}\n\n\t& .watch-btn:hover {\n\t\tbackground-color: rgba(255, 212, 0, 1);\n\n\t}\n\n"],o||(o=a.slice(0)),r=Object.freeze(Object.defineProperties(a,{raw:{value:Object.freeze(o)}})))),I=n(2132),S=n(6103),C=n(2961),A=function(){var t=(0,b.UO)().id,e=(0,v.ZP)("/api/users",g.Z).data,n=(0,v.ZP)("/api/dms/findDmUser/".concat(t),g.Z).data,r=(0,v.ZP)("/api/users/alluser",g.Z).data,a=(0,s.useContext)(S.J),o=(a.onlineList,a.onGameList),i=(0,b.k6)(),l=0;o&&n&&o[n]&&(l=2);var c=(0,s.useCallback)((function(t){t.preventDefault(),w().post("/api/dms/sendMessage/".concat(n,"/3/0"),{message:""},Z.Z).then((function(t){i.push("/game/ping-pong/".concat(t.data))})).catch((function(t){"Block 상태"===t.response.data.data.message?I.Am.error("Cant challenge because you are blocked",{autoClose:4e3,position:I.Am.POSITION.TOP_RIGHT,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,theme:"colored"}):I.Am.error(t.message,{autoClose:4e3,position:I.Am.POSITION.TOP_RIGHT,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,theme:"colored"})}))}),[n,r]),u=(0,s.useCallback)((function(t){t.preventDefault(),o&&n&&i.push("/game/ping-pong/".concat(o[n]))}),[o]);return s.createElement(O,null,s.createElement(d.Z,{className:"wrapper"},s.createElement(f.Z,null,s.createElement(p.Z,{variant:"h6",component:"span",className:"user-profile-container"},null==r?void 0:r.map((function(t){if(t.userId==n)return s.createElement("div",{className:"user-profile-wrapper",key:n},s.createElement(h.Z,{className:"avatar",src:t.profile,alt:"Avatar"}),s.createElement("span",null,t.username))}))),2===l&&o&&e&&void 0===o[null==e?void 0:e.userId]?s.createElement(m.Z,{onClick:u,variant:"contained",className:"watch-btn"},"WATCH ",s.createElement(C.Z,null)):o&&e&&o[null==e?void 0:e.userId]?s.createElement(m.Z,{className:"challenge-block-btn",onClick:c,disabled:!0},"CHALLENGE ",s.createElement(y.Z,null)):s.createElement(m.Z,{className:"challenge-btn",onClick:c},"CHALLENGE ",s.createElement(y.Z,null)))))},M=n(1298);function j(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var D=E.Z.div(i||(i=j(["\n\tbackground: #1e1e1e;\n\twidth: 100%;\n\theight: 100%;\n\tpadding: 8px 0 8px 15px;\n\n\t& .chatList-wrapper {\n\t\tcolor: white; \n\t\tdisplay: flex;\n\t}\n\n\t& .chatList-profile-wrapper {\n\t\tmargin-right: 10px;\n\t}\n\n\t& .avatar {\n\t\twidth: 40px;\n\t\theight: 40px;\n\t\tmargin-bottom: 25px;\n\t}\n\n\t& .chat {\n\t\tmargin-top: 0;\n\t}\n\n  & .challenge-join-wrapper {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    width: 100%;\n  }\n\n  & .challenge-join-btn {\n    margin-right: 15px;\n    font-weight: 700;\n\n  }\n\n  & .challenge-join-block-btn {\n    margin-right: 15px;\n    font-weight: 700;\n\t\tbackground-color: #393939;\n  }\n"]))),P=E.Z.div(l||(l=j(["\n  display: flex;\n  justify-content: center;\n  flex: 1;\n  width: 100%;\n  position: sticky;\n  top: 14px;\n\n  & button {\n    font-weight: bold;\n    font-size: 13px;\n    height: 28px;\n\t\tcolor: white;\n    line-height: 27px;\n    padding: 0 16px;\n    z-index: 2;\n    --saf-0: rgba(var(--sk_foreground_low, 29, 28, 29), 0.13);\n    box-shadow: 0 0 0 1px var(--saf-0), 0 1px 3px 0 rgba(0, 0, 0, 0.08);\n    border-radius: 24px;\n    position: relative;\n    top: -13px;\n    background: #363636;\n    border: none;\n    outline: none;\n  }\n"]))),N=E.Z.div(c||(c=j(["\n  ...style;\n  background-color: #787c7f;\n  width: 8px;\n  border-radius: 5px;\n\n\t&:hover {\n\t\tbackground-color: white;\n\t}\n"]))),Y=n(8667),T=n(3727),L=["style"];function $(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var z,H=function(t){var e,n=t.chatData,r=t.scrollbarRef,a=t.isReachingEnd,o=t.setSize,i=(0,v.ZP)("/api/users/alluser",g.Z).data,l=(0,v.ZP)("/api/users",g.Z).data,c=(0,s.useContext)(S.J).onGameList,u=(0,s.useCallback)((function(t){0!==t.scrollTop||a||o((function(t){return t+1})).then((function(){var e,n;null!=r&&r.current&&(null===(e=r.current)||void 0===e||e.scrollTop((null===(n=r.current)||void 0===n?void 0:n.getScrollHeight())-t.scrollHeight))}))}),[o,a,r]),d=(0,Y.W)(n?n.flat().reverse():[]);return s.createElement(D,null,s.createElement(M.ZP,{ref:r,onScrollFrame:u,renderThumbVertical:function(t){t.style;var e=function(t,e){if(null==t)return{};var n,r,a=function(t,e){if(null==t)return{};var n,r,a={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(a[n]=t[n]);return a}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}(t,L);return s.createElement(N,e)}},Object.entries(d).map((function(t){var n,r,a=(r=2,function(t){if(Array.isArray(t))return t}(n=t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,a,o=[],i=!0,l=!1;try{for(n=n.call(t);!(i=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);i=!0);}catch(t){l=!0,a=t}finally{try{i||null==n.return||n.return()}finally{if(l)throw a}}return o}}(n,r)||function(t,e){if(t){if("string"==typeof t)return $(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$(t,e):void 0}}(n,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=a[0],u=a[1];return s.createElement("div",{key:o},s.createElement(P,null,s.createElement("button",null,o)),null==u?void 0:u.map((function(t,n){return e="",s.createElement("div",{className:"chatList-wrapper",key:t.message+n},s.createElement("div",{className:"chatList-profile-wrapper"},null==i?void 0:i.map((function(r){if(r.userId===t.userId1)return e=r.username,s.createElement(h.Z,{className:"avatar",src:r.profile,alt:"Avatar",key:t.message+n})}))),0===t.match&&s.createElement("div",null,s.createElement("div",null,e),s.createElement("p",{className:"chat"},t.message)),(1===t.match||3===t.match)&&s.createElement("div",{className:"challenge-join-wrapper"},s.createElement("div",null,s.createElement("div",null,e),s.createElement("p",{className:"chat"},t.message)),c&&l&&c[null==l?void 0:l.userId]?s.createElement(m.Z,{className:"challenge-join-block-btn",variant:"contained",disabled:!0},"JOIN"):s.createElement(T.rU,{to:"/game/ping-pong/".concat(t.historyId)},s.createElement(m.Z,{className:"challenge-join-btn",variant:"contained"},"JOIN"))),2===t.match&&s.createElement("div",{className:"challenge-join-wrapper"},s.createElement("div",null,s.createElement("div",null,e),s.createElement("p",{className:"chat"},t.message)),s.createElement(T.rU,{to:"/game/history/".concat(t.historyId)},s.createElement(m.Z,{className:"challenge-join-btn",variant:"contained"},"HISTORY"))))})))}))))},B=n(958),R=n(4901),G=E.Z.div(z||(z=function(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}(["\n\twidth: 100%;\n\theight: 100vh;\n\tdisplay: flex;\n\tflex-direction: column;\n"]))),F=n(1852),U=n(4126);function V(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,a,o=[],i=!0,l=!1;try{for(n=n.call(t);!(i=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);i=!0);}catch(t){l=!0,a=t}finally{try{i||null==n.return||n.return()}finally{if(l)throw a}}return o}}(t,e)||_(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(t,e){if(t){if("string"==typeof t)return J(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?J(t,e):void 0}}function J(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var W=function(){var t,e,n=V((0,s.useState)(""),2),r=n[0],a=n[1],o=(0,b.UO)().id,i=(0,v.ZP)("/api/users",g.Z).data,l=(0,v.ZP)("/api/dms/findDmUser/".concat(o),g.Z).data,c=(0,v.ZP)("/api/dms/dmlist",g.Z).data,d=V((0,s.useState)(!1),2),f=(d[0],d[1]),p=(0,F.useMediaQuery)({maxWidth:700}),m=(0,F.useMediaQuery)({maxWidth:420}),h=(0,B.ZP)((function(t){return"/api/dms/get20MessageUseDmId/".concat(o,"/").concat(t+1)}),g.Z),y=h.data,x=h.mutate,E=h.setSize,k=(0,b.k6)(),O=0===(null==y||null===(t=y[0])||void 0===t?void 0:t.length)||y&&(null===(e=y[y.length-1])||void 0===e?void 0:e.length)<20||!1,S=(0,s.useRef)(null),C=(0,R.Z)(),M=(0,s.useCallback)((function(){null!=r&&r.trim()&&y&&(x((function(t){return null==t||t[0].unshift({id:t[0][0].id+1,dmId:parseInt(o),userId1:null==i?void 0:i.userId,userId2:l,message:r,match:0,createdAt:new Date,updatedAt:new Date,historyId:0}),t}),!1),w().post("/api/dms/sendMessage/".concat(l,"/0/0"),{message:r},Z.Z).catch((function(t){"Block 상태"===t.response.data.data.message?I.Am.error(" Cant send message because it is blocked",{autoClose:4e3,position:I.Am.POSITION.TOP_RIGHT,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,theme:"colored"}):I.Am.error(t.message,{autoClose:4e3,position:I.Am.POSITION.TOP_RIGHT,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,theme:"colored"}),x()})),a(""),setTimeout((function(){var t;null===(t=S.current)||void 0===t||t.scrollToBottom()}),50))}),[r]),j=(0,s.useCallback)((function(t){t.userId1!=(null==i?void 0:i.userId)&&x((function(e){return null==e||e[0].unshift(t),e}),!1).then((function(){f((function(t){return!t})),S.current&&S.current.getScrollHeight()<S.current.getClientHeight()+S.current.getScrollTop()+150&&setTimeout((function(){var t;null===(t=S.current)||void 0===t||t.scrollToBottom()}),50)}))}),[i,S]);return(0,s.useEffect)((function(){if(c){var t,e=!0,n=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=_(t))){n&&(t=n);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return i=t.done,t},e:function(t){l=!0,o=t},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw o}}}}(c);try{for(n.s();!(t=n.n()).done;)if(t.value.id===parseInt(o)){e=!1;break}}catch(t){n.e(t)}finally{n.f()}e&&k.push("/home")}}),[c]),(0,s.useEffect)((function(){return null==C||C.on("dm",j),function(){null==C||C.off("dm")}}),[C,j]),(0,s.useEffect)((function(){var t;1===(null==y?void 0:y.length)&&(null===(t=S.current)||void 0===t||t.scrollToBottom())}),[y]),s.createElement(s.Fragment,null,p?null:s.createElement(U.Z,null),s.createElement(G,null,m?null:s.createElement(A,null),s.createElement(H,{chatData:y,scrollbarRef:S,isReachingEnd:O,setSize:E}),s.createElement(u.Z,{chat:r,setChat:a,onSubmitChat:M})))}},8667:function(t,e,n){"use strict";n.d(e,{W:function(){return c},a:function(){return u}});var r=n(285),a=n.n(r),o=n(7484),i=n.n(o);i().extend(a());var l=["일요일","월요일","화요일","수요일","목요일","금요일","토요일"];function c(t){var e={};return t.forEach((function(t){var n=i()(t.createdAt).format("YYYY-MM-DD");n+=" "+l[i()(t.createdAt).day()],Array.isArray(e[n])?e[n].push(t):e[n]=[t]})),e}function u(t){var e={};return t.forEach((function(t){var n=i()(t.updatedAt).format("YYYY-MM-DD");n+=" "+l[i()(t.updatedAt).day()],Array.isArray(e[n])?e[n].push(t):e[n]=[t]})),e}},285:function(t){t.exports=function(){"use strict";var t={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},e=/(\[[^[]*\])|([-:/.()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,n=/\d\d/,r=/\d\d?/,a=/\d*[^\s\d-_:/()]+/,o={},i=function(t){return(t=+t)+(t>68?1900:2e3)},l=function(t){return function(e){this[t]=+e}},c=[/[+-]\d\d:?(\d\d)?|Z/,function(t){(this.zone||(this.zone={})).offset=function(t){if(!t)return 0;if("Z"===t)return 0;var e=t.match(/([+-]|\d\d)/g),n=60*e[1]+(+e[2]||0);return 0===n?0:"+"===e[0]?-n:n}(t)}],u=function(t){var e=o[t];return e&&(e.indexOf?e:e.s.concat(e.f))},s=function(t,e){var n,r=o.meridiem;if(r){for(var a=1;a<=24;a+=1)if(t.indexOf(r(a,0,e))>-1){n=a>12;break}}else n=t===(e?"pm":"PM");return n},d={A:[a,function(t){this.afternoon=s(t,!1)}],a:[a,function(t){this.afternoon=s(t,!0)}],S:[/\d/,function(t){this.milliseconds=100*+t}],SS:[n,function(t){this.milliseconds=10*+t}],SSS:[/\d{3}/,function(t){this.milliseconds=+t}],s:[r,l("seconds")],ss:[r,l("seconds")],m:[r,l("minutes")],mm:[r,l("minutes")],H:[r,l("hours")],h:[r,l("hours")],HH:[r,l("hours")],hh:[r,l("hours")],D:[r,l("day")],DD:[n,l("day")],Do:[a,function(t){var e=o.ordinal,n=t.match(/\d+/);if(this.day=n[0],e)for(var r=1;r<=31;r+=1)e(r).replace(/\[|\]/g,"")===t&&(this.day=r)}],M:[r,l("month")],MM:[n,l("month")],MMM:[a,function(t){var e=u("months"),n=(u("monthsShort")||e.map((function(t){return t.substr(0,3)}))).indexOf(t)+1;if(n<1)throw new Error;this.month=n%12||n}],MMMM:[a,function(t){var e=u("months").indexOf(t)+1;if(e<1)throw new Error;this.month=e%12||e}],Y:[/[+-]?\d+/,l("year")],YY:[n,function(t){this.year=i(t)}],YYYY:[/\d{4}/,l("year")],Z:c,ZZ:c};function f(n){var r,a;r=n,a=o&&o.formats;for(var i=(n=r.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,(function(e,n,r){var o=r&&r.toUpperCase();return n||a[r]||t[r]||a[o].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,(function(t,e,n){return e||n.slice(1)}))}))).match(e),l=i.length,c=0;c<l;c+=1){var u=i[c],s=d[u],f=s&&s[0],p=s&&s[1];i[c]=p?{regex:f,parser:p}:u.replace(/^\[|\]$/g,"")}return function(t){for(var e={},n=0,r=0;n<l;n+=1){var a=i[n];if("string"==typeof a)r+=a.length;else{var o=a.regex,c=a.parser,u=t.substr(r),s=o.exec(u)[0];c.call(e,s),t=t.replace(s,"")}}return function(t){var e=t.afternoon;if(void 0!==e){var n=t.hours;e?n<12&&(t.hours+=12):12===n&&(t.hours=0),delete t.afternoon}}(e),e}}return function(t,e,n){n.p.customParseFormat=!0,t&&t.parseTwoDigitYear&&(i=t.parseTwoDigitYear);var r=e.prototype,a=r.parse;r.parse=function(t){var e=t.date,r=t.utc,i=t.args;this.$u=r;var l=i[1];if("string"==typeof l){var c=!0===i[2],u=!0===i[3],s=c||u,d=i[2];u&&(d=i[2]),o=this.$locale(),!c&&d&&(o=n.Ls[d]),this.$d=function(t,e,n){try{if(["x","X"].indexOf(e)>-1)return new Date(("X"===e?1e3:1)*t);var r=f(e)(t),a=r.year,o=r.month,i=r.day,l=r.hours,c=r.minutes,u=r.seconds,s=r.milliseconds,d=r.zone,p=new Date,m=i||(a||o?1:p.getDate()),h=a||p.getFullYear(),v=0;a&&!o||(v=o>0?o-1:p.getMonth());var g=l||0,b=c||0,y=u||0,x=s||0;return d?new Date(Date.UTC(h,v,m,g,b,y,x+60*d.offset*1e3)):n?new Date(Date.UTC(h,v,m,g,b,y,x)):new Date(h,v,m,g,b,y,x)}catch(t){return new Date("")}}(e,l,r),this.init(),d&&!0!==d&&(this.$L=this.locale(d).$L),s&&e!=this.format(l)&&(this.$d=new Date("")),o={}}else if(l instanceof Array)for(var p=l.length,m=1;m<=p;m+=1){i[1]=l[m-1];var h=n.apply(this,i);if(h.isValid()){this.$d=h.$d,this.$L=h.$L,this.init();break}m===p&&(this.$d=new Date(""))}else a.call(this,t)}}}()},958:function(t,e,n){"use strict";n.d(e,{ZP:function(){return g}});var r=n(7294),a=n(2503),o="undefined"==typeof window||"Deno"in window,i=o?r.useEffect:r.useLayoutEffect,l="undefined"!=typeof navigator&&navigator.connection;!o&&l&&(["slow-2g","2g"].includes(l.effectiveType)||l.saveData);var c={}[0],u=function(t){return t===c},s=function(t){return"function"==typeof t},d=new WeakMap,f=0;function p(t){if(s(t))try{t=t()}catch(e){t=""}var e;return Array.isArray(t)?(e=t,t=function(t){if(!t.length)return"";for(var e="arg",n=0;n<t.length;++n){var r=t[n],a=c;null===r||"object"!=typeof r&&!s(r)?a=JSON.stringify(r):d.has(r)?a=d.get(r):(a=f,d.set(r,f++)),e+="$"+a}return e}(t)):e=[t=String(t||"")],[t,e,t?"$err$"+t:"",t?"$req$"+t:""]}function m(t){return s(t[1])?[t[0],t[1],t[2]||{}]:[t[0],null,(null===t[1]?t[2]:t[1])||{}]}var h,v,g=(h=a.ZP,v=function(t){return function(e,n,a){var o=a.cache,l=a.initialSize,d=void 0===l?1:l,f=a.revalidateAll,m=void 0!==f&&f,h=a.persistSize,v=void 0!==h&&h,g=null;try{g=function(t){return p(t?t(0,null):null)[0]}(e)}catch(t){}var b=(0,r.useState)({})[1],y=null;g&&(y="$ctx$"+g);var x=null;g&&(x="$len$"+g);var w=(0,r.useRef)(!1),Z=(0,r.useCallback)((function(){var t=o.get(x);return u(t)?d:t}),[x,d]),E=(0,r.useRef)(Z());i((function(){w.current?g&&o.set(x,v?E.current:d):w.current=!0}),[g]);var k=(0,r.useRef)(),O=t(g?"$inf$"+g:null,(function(){return r=function(){var t,r,i,l,c,s,d,f,h,v,g,b;return function(t,e){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=e.call(t,i)}catch(t){o=[6,t],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}(this,(function(x){switch(x.label){case 0:t=o.get(y)||[],r=t[0],i=t[1],l=[],c=Z(),s=null,d=0,x.label=1;case 1:return d<c?(f=p(e?e(d,s):null),h=f[0],v=f[1],h?(g=o.get(h),b=m||r||u(g)||!d&&!u(k.current)||i&&!u(i[d])&&!a.compare(i[d],g),n&&b?[4,n.apply(void 0,v)]:[3,3]):[3,5]):[3,5];case 2:g=x.sent(),o.set(h,g),x.label=3;case 3:l.push(g),s=g,x.label=4;case 4:return++d,[3,1];case 5:return o.delete(y),[2,l]}}))},new((t=void 0)||(t=Promise))((function(e,n){function a(t){try{i(r.next(t))}catch(t){n(t)}}function o(t){try{i(r.throw(t))}catch(t){n(t)}}function i(n){var r;n.done?e(n.value):(r=n.value,r instanceof t?r:new t((function(t){t(r)}))).then(a,o)}i((r=r.apply(void 0,[])).next())}));var t,r}),a);i((function(){k.current=O.data}),[O.data]);var I=(0,r.useCallback)((function(t,e){if(void 0===e&&(e=!0),y){if(e&&!u(t)){var n=k.current;o.set(y,[!1,n])}else e&&o.set(y,[!0]);return O.mutate(t,e)}}),[y]),S=(0,r.useCallback)((function(t){var n;if(x&&(s(t)?n=t(Z()):"number"==typeof t&&(n=t),"number"==typeof n))return o.set(x,n),E.current=n,b({}),I(function(t){for(var n=[],r=null,a=0;a<t;++a){var i=p(e?e(a,r):null)[0],l=i?o.get(i):c;if(u(l))return k.current;n.push(l),r=l}return n}(n))}),[x,Z,I]);return{size:Z(),setSize:S,mutate:I,get error(){return O.error},get data(){return O.data},get isValidating(){return O.isValidating}}}},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=m(t),r=n[0],a=n[1],o=n[2];return o.use=(o.use||[]).concat(v),h(r,a,o)})}}]);