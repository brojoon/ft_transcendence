{"version":3,"file":"201.js","mappings":"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","sources":["webpack://brojoon/./pages/History/style.ts","webpack://brojoon/./pages/History/index.tsx"],"sourcesContent":["import styled from '@emotion/styled';\n\nexport const HistoryContainer = styled.div`\n\tcolor: white;\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: center;\n\talign-items: center;\n\twidth: 100%;\n\tfont-size: 30px;\n\theight: 100vh;\n\n\t& .wrapper {\n\t\tdisplay: flex;\n\t\tjustify-content: space-around;\n\t\talign-items: center;\n\t\twidth: 100%;\n\t}\n\n\t& .result-wrapper {\n\t\tdisplay: flex;\n\t\tmargin-bottom: 18px;\n\t}\n\n\t& .result-icon {\n\t\tfont-size: 45px;\n\t}\n\n\t& .result-winnert-text {\n\t\tfont-size: 30px;\n\t}\n\n\n\n\n`;\n\nexport const UserProfileContainer1 = styled.div`\n\tmargin-bottom: 15px;\n\n\t\n\t& .profile1-wrapper {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\twidth: 350px;\n\t\theight: 410px;\n\t\tborder: 1px solid rgba(57, 57, 57, 0.7);\n\t\tbackground-color: #1e1e1e;\n\t\twhite-space: overflow-wrap;\n\n\t}\n\n\t& .profile1-wrapper:hover {\n\t\tbackground: #666666;\n\t}\n\n\t& .avatar1 {\n\t\twidth: 250px;\n\t\theight: 250px;\n\t\tmargin-bottom: 8px;\n\t}\n\n\t& .profile1-text {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t\tcolor: white;\n\t}\n\t\n\n\n`;\n\nexport const UserProfileContainer2 = styled.div`\n\tmargin-bottom: 15px;\n\n\t& .profile2-wrapper {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\twidth: 350px;\n\t\theight: 410px;\n\t\tborder: 1px solid rgba(57, 57, 57, 0.7);\n\t\tbackground-color: #1e1e1e;\n\t\twhite-space: overflow-wrap;\n\t}\n\n\t& .profile2-wrapper:hover {\n\t\tbackground: #666666;\n\t}\n\n\t& .avatar2 {\n\t\twidth: 250px;\n\t\theight: 250px;\n\t\tmargin-bottom: 8px;\n\t}\n\n\t& .profile2-text {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t\tcolor: white;\n\t}\n\t\n`;\n\nexport const ProfileOneText = styled.div<{ winner: string }>`\n\tcolor: ${(props) => props.winner};\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: center;\n\talign-items: center;\n`;\n\nexport const ProfileTwoText = styled.div<{ winner: string }>`\n\tcolor: ${(props) => props.winner};\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: center;\n\talign-items: center;\n`;","import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport Button from '@mui/material/Button';\nimport { Link, useParams } from 'react-router-dom';\nimport ListItem from '@mui/material/ListItem';\nimport EmojiEventsIcon from '@mui/icons-material/EmojiEvents';\nimport Avatar from '@mui/material/Avatar';\nimport useSWR from 'swr';\nimport fetcher from '@utils/fetcher';\nimport { toast } from 'react-toastify';\nimport { IAllUser } from '@typings/db';\nimport {\n  HistoryContainer,\n  UserProfileContainer1,\n  UserProfileContainer2,\n  ProfileOneText,\n  ProfileTwoText,\n} from './style';\n\nconst option = {\n  withCredentials: true,\n};\n\nconst History = (data: any) => {\n  const { id } = useParams<{ id: string }>();\n  const [userId1, setUserId1] = useState('');\n  const [userId2, setUserId2] = useState('');\n  const [player1Point, setPlayer1Point] = useState(0);\n  const [player2Point, setPlayer2Point] = useState(0);\n  const [winner, setWinner] = useState(`${data.match.params.winner}`);\n  const [userId1Nickname, setUserId1Nickname] = useState('');\n  const [userId2Nickname, setUserId2Nickname] = useState('');\n  const [winnerNickname, setWinnerNickname] = useState('');\n  const [userId1Profile, setUserId1Profile] = useState('');\n  const [userId2Profile, setUserId2Profile] = useState('');\n  const { data: allUserList } = useSWR<IAllUser[]>('/api/users/alluser', fetcher);\n\n  useEffect(() => {\n    if (userId1 && userId2) {\n      allUserList?.map((user) => {\n        if (user.userId === userId1) {\n          setUserId1Profile(user.profile);\n          setUserId1Nickname(user.username);\n          if (winner === userId1) {\n            setWinnerNickname(user.username);\n          }\n        } else if (user.userId === userId2) {\n          setUserId2Profile(user.profile);\n          setUserId2Nickname(user.username);\n          if (winner === userId2) {\n            setWinnerNickname(user.username);\n          }\n        }\n      });\n    }\n  }, [userId1, userId2, winner]);\n\n  useEffect(() => {\n    async function getGameInfo() {\n      await axios\n        .get(`/api/game/history/${id}`, option)\n        .then((res: any) => {\n          setUserId1(res.data.userId1);\n          setUserId2(res.data.userId2);\n          setPlayer1Point(res.data.user1Point);\n          setPlayer2Point(res.data.user2Point);\n          setWinner(res.data.winner);\n          // if (res.data.winner === null)\n          //   window.location.href = `http://34.82.79.134:3000/history/${gameId}`;\n        })\n        .catch((error) => {\n          toast.error(error.message, {\n            autoClose: 4000,\n            position: toast.POSITION.TOP_RIGHT,\n            hideProgressBar: false,\n            closeOnClick: true,\n            pauseOnHover: true,\n            theme: 'colored',\n          });\n        });\n    }\n    if (userId1 === '') getGameInfo();\n  }, [id, userId1]);\n\n  return (\n    <HistoryContainer>\n      <div className=\"wrapper\">\n        <UserProfileContainer1>\n          <Link to={`/users/${userId1Nickname}`}>\n            <ListItem className=\"profile1-wrapper\" button>\n              <Avatar className=\"avatar1\" src={userId1Profile} alt=\"Avatar\" />\n              <ProfileOneText winner={`${winner === userId1 ? 'white' : 'red'}`}>\n                <span>{userId1Nickname}</span>\n                <span>{player1Point} Point</span>\n              </ProfileOneText>\n            </ListItem>\n          </Link>\n        </UserProfileContainer1>\n        <div>VS</div>\n        <UserProfileContainer2>\n          <Link to={`/users/${userId2Nickname}`}>\n            <ListItem className=\"profile2-wrapper\" button>\n              <Avatar className=\"avatar2\" src={userId2Profile} alt=\"Avatar\" />\n              <ProfileTwoText winner={`${winner === userId2 ? 'white' : 'red'}`}>\n                <span>{userId2Nickname}</span>\n                <span>{player2Point} Point</span>\n              </ProfileTwoText>\n            </ListItem>\n          </Link>\n        </UserProfileContainer2>\n      </div>\n\n      <div className=\"result-wrapper\">\n        <EmojiEventsIcon className=\"result-icon\" />\n        <div className=\"\">승리자 : {winnerNickname ? winnerNickname : '무승부'}</div>\n      </div>\n      <div>\n        <Link to=\"/game\">\n          <Button variant=\"contained\"> 매치 페이지로 이동 </Button>\n        </Link>\n      </div>\n    </HistoryContainer>\n  );\n};\n\nexport default History;\n"],"names":["HistoryContainer","styled","UserProfileContainer1","UserProfileContainer2","ProfileOneText","props","winner","ProfileTwoText","option","withCredentials","data","id","useParams","useState","userId1","setUserId1","userId2","setUserId2","player1Point","setPlayer1Point","player2Point","setPlayer2Point","match","params","setWinner","userId1Nickname","setUserId1Nickname","userId2Nickname","setUserId2Nickname","winnerNickname","setWinnerNickname","userId1Profile","setUserId1Profile","userId2Profile","setUserId2Profile","allUserList","useSWR","fetcher","useEffect","map","user","userId","profile","username","axios","then","res","user1Point","user2Point","catch","error","toast","message","autoClose","position","hideProgressBar","closeOnClick","pauseOnHover","theme","getGameInfo","className","to","ListItem","button","Avatar","src","alt","EmojiEvents","Button","variant"],"sourceRoot":""}