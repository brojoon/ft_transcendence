{"version":3,"file":"355.js","mappings":"mYAEO,IAAMA,EAAsBC,EAAAA,EAAAA,IAAH,uJAUnBC,EAA2BD,EAAAA,EAAAA,IAAH,s+B,w8BCArC,I,MA8KA,EA9KwB,WACtB,IAAcE,GAAgBC,EAAAA,EAAAA,IAAgB,+BAAgCC,EAAAA,GAAtEC,KACR,KAA8BC,EAAAA,EAAAA,WAAS,GAAvC,GAAOC,EAAP,KAAgBC,EAAhB,KACA,KAA4BF,EAAAA,EAAAA,UAAS,IAArC,GAAOG,EAAP,KAAeC,EAAf,KACA,KAAkCJ,EAAAA,EAAAA,WAAS,GAA3C,GAAOK,EAAP,KAAkBC,EAAlB,KACA,KAAgCN,EAAAA,EAAAA,UAAS,IAAzC,GAAOO,EAAP,KAAiBC,EAAjB,MAEAC,EAAAA,EAAAA,YAAU,WACJb,GACFM,EAAWN,KAEZ,CAACA,IAEJ,IAAMc,GAAmBC,EAAAA,EAAAA,cACvB,SAACC,GACe,UAAVA,EAAEC,KACJC,IAAAA,IAAA,iCACiCP,GAAYQ,EAAAA,GAC1CC,MAAK,SAACJ,IACU,IAAXA,EAAEb,MACJS,EAAY,IACZM,IAAAA,IACO,qBAAsBC,EAAAA,GAC1BC,MAAK,WACJC,EAAAA,GAAAA,QAAc,6BAA8B,CAC1CC,UAAW,IACXC,SAAUF,EAAAA,GAAAA,SAAAA,UACVG,iBAAiB,EACjBC,cAAc,EACdC,cAAc,EACdC,MAAO,YAETrB,GAAW,GACXI,GAAa,MAEdkB,OAAM,SAACC,GACNR,EAAAA,GAAAA,MAAYQ,EAAMC,QAAS,CACzBR,UAAW,IACXC,SAAUF,EAAAA,GAAAA,SAAAA,UACVG,iBAAiB,EACjBC,cAAc,EACdC,cAAc,EACdC,MAAO,gBAIbN,EAAAA,GAAAA,MAAY,sBAAuB,CACjCC,UAAW,IACXC,SAAUF,EAAAA,GAAAA,SAAAA,UACVG,iBAAiB,EACjBC,cAAc,EACdC,cAAc,EACdC,MAAO,eAIZC,OAAM,SAACC,GACNR,EAAAA,GAAAA,MAAYQ,EAAMC,QAAS,CACzBR,UAAW,IACXC,SAAUF,EAAAA,GAAAA,SAAAA,UACVG,iBAAiB,EACjBC,cAAc,EACdC,cAAc,EACdC,MAAO,iBAKjB,CAAChB,IAGGoB,GAAmBhB,EAAAA,EAAAA,cACvB,SAACC,GACCJ,EAAYI,EAAEgB,OAAOC,SAEvB,CAACtB,IAGGuB,GAAenB,EAAAA,EAAAA,cAAY,SAACoB,IACH,IAAzBA,EAAMH,OAAO3B,SACfa,IAAAA,IACO,sBAAuBC,EAAAA,GAC3BC,MAAK,WACJC,EAAAA,GAAAA,QAAc,yCAA0C,CACtDC,UAAW,IACXC,SAAUF,EAAAA,GAAAA,SAAAA,UACVG,iBAAiB,EACjBC,cAAc,EACdC,cAAc,EACdC,MAAO,YAETrB,GAAW,MAEZsB,OAAM,SAACC,GACNR,EAAAA,GAAAA,MAAYQ,EAAMC,QAAS,CACzBR,UAAW,IACXC,SAAUF,EAAAA,GAAAA,SAAAA,UACVG,iBAAiB,EACjBC,cAAc,EACdC,cAAc,EACdC,MAAO,YAETrB,GAAW,OAGY,IAAzB6B,EAAMH,OAAO3B,SACfa,IAAAA,IAAA,wBACgC,CAC5BkB,iBAAiB,EACjBC,aAAc,SAKfjB,MAAK,SAACkB,GACL9B,EACE+B,OAAOC,IAAIC,gBAAgB,IAAIC,KAAK,CAACJ,EAAInC,MAAO,CAAEwC,KAAML,EAAIM,QAAQ,oBAEtEtC,GAAW,MAEZsB,OAAM,SAACC,GACNR,EAAAA,GAAAA,MAAYQ,EAAMC,QAAS,CACzBR,UAAW,IACXC,SAAUF,EAAAA,GAAAA,SAAAA,UACVG,iBAAiB,EACjBC,cAAc,EACdC,cAAc,EACdC,MAAO,YAETrB,GAAW,QAGhB,IAEGuC,GAAiB9B,EAAAA,EAAAA,cAAY,WAC7BV,GACFC,GAAW,GACXI,GAAa,IACRA,GAAa,KACnB,CAACD,EAAWJ,IAEf,OACE,gCACGI,GAAaJ,GACZ,gCACE,gBAACR,EAAD,CAAqBiD,QAASD,IAC9B,gBAAC9C,EAAD,KACE,gBAACgD,EAAA,EAAD,CAAYC,UAAU,aAAaF,QAASD,GAC1C,gBAACI,EAAA,EAAD,OAEF,uBAAKD,UAAU,SAASE,IAAK3C,IAC7B,gBAAC4C,EAAA,EAAD,CACEH,UAAU,aACVI,WAAYtC,EACZuC,SAAUtB,EACVE,MAAOtB,EACP2C,GAAG,iBACHC,MAAM,MACNC,QAAQ,WACRC,aAAa,UAKrB,gBAACC,EAAA,EAAD,CACEZ,QAASD,EACTxC,UAASA,EACTgD,SAAUnB,EACVyB,WAAY,CAAE,aAAc,kB,sIClL7B,I,IAAMC,EAA0B9D,EAAAA,EAAAA,IAAH,MAAG,2tC,kHAkFJA,EAAAA,EAAAA,IAAH,MAAG,ghBA0BGA,EAAAA,EAAAA,IAAH,+FAIpB,SAAC+D,GAAD,OAAWA,EAAMC,cChHzB,IAAMC,EAAsBjE,EAAAA,EAAAA,IAAH,MAAG,ghBA2BtBkE,EAAyBlE,EAAAA,EAAAA,IAAH,MAAG,yFAIvB,SAAC+D,GAAD,OAAWA,EAAMC,c,87BCxBhC,IAgFA,EAhF4B,WAC1B,OAA+C7D,EAAAA,EAAAA,IAAqB,aAAcC,EAAAA,GAApD+D,GAA9B,EAAQ9D,KAAR,EAAsB+D,QACtB,KAA4C9D,EAAAA,EAAAA,UAAS,IAArD,GAAO+D,EAAP,KAAuBC,EAAvB,KACA,KAAsChE,EAAAA,EAAAA,UAAS,GAA/C,GAAOiE,EAAP,KAAoBC,EAApB,KAEMC,GAAmBxD,EAAAA,EAAAA,cAAY,SAACC,GACpCA,EAAEwD,iBACFJ,EAAkBpD,EAAEgB,OAAOC,OAC3BqC,EAAe,KACd,IAEGG,GAAoB1D,EAAAA,EAAAA,cACxB,SAACC,GACMmD,IAEDA,EAAeO,OAAS,GAC1BJ,EAAe,GAGH,UAAVtD,EAAEC,MACJD,EAAEwD,iBACFtD,IAAAA,IAAA,qCACqCiD,GAAkB,CACnD/B,iBAAiB,IAElBhB,MAAK,SAACkB,IACY,IAAbA,EAAInC,MAINkB,EAAAA,GAAAA,QAAc,qCAAsC,CAClDC,UAAW,IACXC,SAAUF,EAAAA,GAAAA,SAAAA,UACVG,iBAAiB,EACjBC,cAAc,EACdC,cAAc,EACdC,MAAO,YAETsC,IACAG,EAAkB,KAZlBE,EAAe,MAelB1C,OAAM,SAACC,GACNR,EAAAA,GAAAA,MAAYQ,EAAMC,QAAS,CACzBR,UAAW,IACXC,SAAUF,EAAAA,GAAAA,SAAAA,UACVG,iBAAiB,EACjBC,cAAc,EACdC,cAAc,EACdC,MAAO,mBAKjB,CAACsC,EAAcE,IAGjB,OACE,gBAAC,EAAD,KACE,wBAAMnB,UAAU,oBAAhB,iBACA,gBAACG,EAAA,EAAD,CACElB,MAAOkC,EACPd,SAAUkB,EACVI,QAASF,EACTG,WAAS,EACTrB,MAAM,WACND,GAAG,YACHG,aAAa,QAEf,gBAAC,EAAD,CAAwBK,WAA4B,IAAhBO,EAAoB,SAAW,YAChEA,GAA+B,IAAhBA,EACd,+EAEA,yE,87BClEV,IAwHA,EAxHuB,WACrB,OAA+CpE,EAAAA,EAAAA,IAAqB,aAAcC,EAAAA,GAApE2E,EAAd,EAAQ1E,KAAsB8D,EAA9B,EAAsBC,OACtB,KAAwC9D,EAAAA,EAAAA,UAAc,MAAtD,GAAO0E,EAAP,KAAqBC,EAArB,KACA,KAA4B3E,EAAAA,EAAAA,UAAS,IAArC,GAAO4E,EAAP,KAAeC,EAAf,KAWMC,GAAmBnE,EAAAA,EAAAA,cAAY,WAAM,QACzC,GAAK+D,GAAiBA,EAAa,GAAnC,CACA,IAAMK,EAAW,IAAIC,SAErBD,EAASE,OACP,QACAP,EAAa,GACb,UAAGD,MAAAA,OAAH,EAAGA,EAAQS,QAAWR,EAAa,GAAGS,KAAKC,MAArB,UAA2BV,EAAa,UAAxC,iBAA2B,EAAiBS,YAA5C,aAA2B,EAAuBE,QAAQ,OASlFvE,IAAAA,KACQ,oBAAqBiE,EARd,CACb/C,iBAAiB,EACjBQ,QAAS,CACP,eAAgB,yBAMjBxB,MAAK,SAACkB,GACLjB,EAAAA,GAAAA,QAAc,4CAA6C,CACzDC,UAAW,IACXC,SAAUF,EAAAA,GAAAA,SAAAA,UACVG,iBAAiB,EACjBC,cAAc,EACdC,cAAc,EACdC,MAAO,YAETsC,OAEDrC,OAAM,SAACC,GACNR,EAAAA,GAAAA,MAAYQ,EAAMC,QAAS,CACzBR,UAAW,IACXC,SAAUF,EAAAA,GAAAA,SAAAA,UACVG,iBAAiB,EACjBC,cAAc,EACdC,cAAc,EACdC,MAAO,kBAGZ,CAACkD,EAAQC,KAEZjE,EAAAA,EAAAA,YAAU,WACR6E,OAGF,IAAMA,EAAU,WACd,IAAKZ,IAAiBA,EAAa,GAAI,OAAO,EAC9C,IAAMa,EAAS,IAAIC,WAEnBD,EAAOE,OAAS,WACdZ,EAAU,GAAD,OAAIU,EAAOG,UAEtBH,EAAOI,cAAcjB,EAAa,KAEpC,OACE,gBAAClB,EAAD,KACE,uBAAKZ,UAAU,oBACb,uCACA,uBAAKA,UAAU,sBACb,gBAAC,EAAD,MACA,yDAGJ,uBAAKA,UAAU,yBACb,uBAAKA,UAAU,uBACb,uBAAKA,UAAU,iBAAf,UACA,uBAAKA,UAAU,8BACb,uBAAKA,UAAU,yBACb,yBAAOgD,QAAQ,yBACb,yBACEhD,UAAU,eACViD,OAAO,UACP3C,GAAG,wBACH4C,UAAQ,EACRvD,KAAK,OACLU,SApFK,SAAClB,GACpB4C,EAAgB5C,EAAMH,OAAOmE,UAqFjB,gBAACC,EAAA,EAAD,CAAQpD,UAAU,SAASE,IAAK8B,IAAkBH,MAAAA,OAAZ,EAAYA,EAAQwB,SAASC,IAAI,YAEzE,uBAAKtD,UAAU,cAAcF,QApFjB,WACtBmC,EAAU,IACVF,EAAgB,QAmFJ,gBAAChC,EAAA,EAAD,CAAYC,UAAU,eACpB,gBAACC,EAAA,EAAD,SAIN,4BAAO4B,MAAAA,OAAP,EAAOA,EAAQS,QACf,wBAAMtC,UAAU,iBAAiB6B,MAAAA,OAAjC,EAAiCA,EAAQ0B,UACzC,uBAAKvD,UAAU,sBACb,gBAACwD,EAAA,EAAD,CACExD,UAAU,aACVQ,QAAQ,YACRiD,UAAW,gBAACC,EAAA,EAAD,MACXC,UAAU,OACV7D,QAASoC,GALX,cAaR,gBAAC,EAAD","sources":["webpack://brojoon/./components/TwoFactorSwitch/style.ts","webpack://brojoon/./components/TwoFactorSwitch/index.tsx","webpack://brojoon/./pages/ProfileSetting/style.ts","webpack://brojoon/./components/NickNameChangeField/style.ts","webpack://brojoon/./components/NickNameChangeField/index.tsx","webpack://brojoon/./pages/ProfileSetting/index.tsx"],"sourcesContent":["import styled from '@emotion/styled';\n\nexport const TwoFactorSwitchBack = styled.div`\n\tposition: fixed;\n\ttop: 0;\n\tleft: 0;\n\tright: 0;\n\tbottom: 0;\n\tz-index: 1000;\n\tbackground-color: rgba(30, 30, 030, 0.5);\n`;\n\nexport const TwoFactorSwitchContainer = styled.div`\n\tposition: absolute;\n\twidth: 500px;\n\theight: 550px;\n\tleft: 50%;\n\ttop: 50%;\n\ttransform: translate(-50%, -50%);\n\tz-index: 2000;\n\tdisplay: flex;\n\tflex-direction: column;\n\tbackground-color: #1e1e1e;\n\tbox-shadow:\n\t\t0 3px 1px -2px rgb(0 0 0 / 20%), 0 2px 2px 0 rgb(0 0 0 / 14%), 0 1px 5px 0 rgb(0 0 0 / 12%);\n\t\n\t& .close-icon {\n\t\tcolor: white;\n\t\tmargin-left: 430px;\n\t}\n\n\t& .qr-img {\n\t\twidth: 400px;\n\t\theight: 400px;\n\t\tmargin: 10px 45px 0 45px;\n\t}\n\n\t& .text-field {\n\t\tmargin: 20px;\n\n\t}\n\n\t& .css-14s5rfu-MuiFormLabel-root-MuiInputLabel-root {\n\t\tcolor: white;\n\t}\n\n\t& .css-1t8l2tu-MuiInputBase-input-MuiOutlinedInput-input {\n\t\tcolor: white;\n\t}\n\n\t& .css-1d3z3hw-MuiOutlinedInput-notchedOutline {\n\t\tborder-color: rgba(255, 255, 255, 0.6);\n\t}\n\n\t& .css-9ddj71-MuiInputBase-root-MuiOutlinedInput-root:hover .MuiOutlinedInput-notchedOutline {\n\t\tborder-color: rgba(255, 255, 255, 1);\n\n\t}\n\n\n\n\n\n\n\t\t`;","import React, { useCallback, useState, useEffect } from 'react';\nimport Switch from '@mui/material/Switch';\nimport axios from 'axios';\nimport CloseIcon from '@mui/icons-material/Close';\nimport IconButton from '@mui/material/IconButton';\nimport useSWR from 'swr';\nimport fetcher from '@utils/fetcher';\nimport TextField from '@mui/material/TextField';\nimport config from '@utils/config';\nimport { TwoFactorSwitchBack, TwoFactorSwitchContainer } from './style';\nimport { toast } from 'react-toastify';\n\nconst TwoFactorSwitch = () => {\n  const { data: isTwoFactor } = useSWR<boolean>('/api/users/two-factor-status', fetcher);\n  const [checked, setChecked] = useState(false);\n  const [imgsrc, setImgsrc] = useState('');\n  const [isQRModal, setisQRModal] = useState(false);\n  const [OTPvalue, setOTPvalue] = useState('');\n\n  useEffect(() => {\n    if (isTwoFactor) {\n      setChecked(isTwoFactor);\n    }\n  }, [isTwoFactor]);\n\n  const onSubmitOTPvalue = useCallback(\n    (e) => {\n      if (e.key === 'Enter') {\n        axios\n          .get(`/api/auth/otpCodeCheck/${OTPvalue}`, config)\n          .then((e) => {\n            if (e.data === true) {\n              setOTPvalue('');\n              axios\n                .get('/api/users/turn-on', config)\n                .then(() => {\n                  toast.success('Successfully authenticated', {\n                    autoClose: 3000,\n                    position: toast.POSITION.TOP_RIGHT,\n                    hideProgressBar: false,\n                    closeOnClick: true,\n                    pauseOnHover: true,\n                    theme: 'colored',\n                  });\n                  setChecked(true);\n                  setisQRModal(false);\n                })\n                .catch((error) => {\n                  toast.error(error.message, {\n                    autoClose: 3000,\n                    position: toast.POSITION.TOP_RIGHT,\n                    hideProgressBar: false,\n                    closeOnClick: true,\n                    pauseOnHover: true,\n                    theme: 'colored',\n                  });\n                });\n            } else {\n              toast.error('Authenticate failed', {\n                autoClose: 3000,\n                position: toast.POSITION.TOP_RIGHT,\n                hideProgressBar: false,\n                closeOnClick: true,\n                pauseOnHover: true,\n                theme: 'colored',\n              });\n            }\n          })\n          .catch((error) => {\n            toast.error(error.message, {\n              autoClose: 3000,\n              position: toast.POSITION.TOP_RIGHT,\n              hideProgressBar: false,\n              closeOnClick: true,\n              pauseOnHover: true,\n              theme: 'colored',\n            });\n          });\n      }\n    },\n    [OTPvalue],\n  );\n\n  const onChangeOTPinput = useCallback(\n    (e) => {\n      setOTPvalue(e.target.value);\n    },\n    [OTPvalue],\n  );\n\n  const handleChange = useCallback((event: any) => {\n    if (event.target.checked === false) {\n      axios\n        .get('/api/users/turn-off', config)\n        .then(() => {\n          toast.success('Successfully turned off authentication', {\n            autoClose: 3000,\n            position: toast.POSITION.TOP_RIGHT,\n            hideProgressBar: false,\n            closeOnClick: true,\n            pauseOnHover: true,\n            theme: 'colored',\n          });\n          setChecked(false);\n        })\n        .catch((error) => {\n          toast.error(error.message, {\n            autoClose: 3000,\n            position: toast.POSITION.TOP_RIGHT,\n            hideProgressBar: false,\n            closeOnClick: true,\n            pauseOnHover: true,\n            theme: 'colored',\n          });\n          setChecked(true);\n        });\n    }\n    if (event.target.checked === true) {\n      axios\n        .get(`/api/auth/make-qrcode`, {\n          withCredentials: true,\n          responseType: 'blob',\n          // headers: {\n          //   Authorization: `Bearer ${getToken()}`,\n          // },\n        })\n        .then((res) => {\n          setImgsrc(\n            window.URL.createObjectURL(new Blob([res.data], { type: res.headers['content-type'] })),\n          );\n          setChecked(true);\n        })\n        .catch((error) => {\n          toast.error(error.message, {\n            autoClose: 3000,\n            position: toast.POSITION.TOP_RIGHT,\n            hideProgressBar: false,\n            closeOnClick: true,\n            pauseOnHover: true,\n            theme: 'colored',\n          });\n          setChecked(false);\n        });\n    }\n  }, []);\n\n  const onClickQRModal = useCallback(() => {\n    if (checked) {\n      setChecked(false);\n      setisQRModal(false);\n    } else setisQRModal(true);\n  }, [isQRModal, checked]);\n\n  return (\n    <>\n      {isQRModal && checked && (\n        <>\n          <TwoFactorSwitchBack onClick={onClickQRModal}></TwoFactorSwitchBack>\n          <TwoFactorSwitchContainer>\n            <IconButton className=\"close-icon\" onClick={onClickQRModal}>\n              <CloseIcon />\n            </IconButton>\n            <img className=\"qr-img\" src={imgsrc} />\n            <TextField\n              className=\"text-field\"\n              onKeyPress={onSubmitOTPvalue}\n              onChange={onChangeOTPinput}\n              value={OTPvalue}\n              id=\"outlined-basic\"\n              label=\"OTP\"\n              variant=\"outlined\"\n              autoComplete=\"off\"\n            />\n          </TwoFactorSwitchContainer>\n        </>\n      )}\n      <Switch\n        onClick={onClickQRModal}\n        checked={checked ? true : false}\n        onChange={handleChange}\n        inputProps={{ 'aria-label': 'controlled' }}\n      />\n    </>\n  );\n};\n\nexport default TwoFactorSwitch;\n","import styled from '@emotion/styled';\n\nexport const ProfileSettingContainer = styled.div`\n\tdisplay: flex;\n\tflex-direction: column;\n\tcolor: white;\n\tmargin: 20px;\n\twidth: 100%;\n\tfont-size: 22px;\n\n\t& .security-wrapper {\n\t\twidth: 100%;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tpadding: 20px;\n\t\tbackground-color: #1e1e1e;\n\t}\n\n\t& .two-factor-wrapper {\n\t\tdisplay: flex;\n\t}\n\n\t& .user-avatar-container {\n\t\twidth: 100%;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tbackground-color: #1e1e1e;\n\t\tmargin-top: 25px;\n\t}\n\n\t& .user-avatar-wrapper {\n\t\tpadding: 20px 20px 20px 20px;\n\t}\n\n\t& .header-avatar {\n\t\theight: 70px;\n\t}\n\n\t& .user-avatar-upload-section {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\talign-items: center;\n\t}\n\n\t& .avatar-upload-wrapper {\n\t\tposition: relative;\n\t}\n\n\t& .upload-input {\n\t\tdisplay: none;\n\t}\n\n\t& .avatar {\n\t\twidth: 180px;\n\t\theight: 180px;\n\t}\n\n\t& .remove-btn {\n\t\tposition: absolute;\n\t\ttop: -5px;\n\t\tright: -20px;\n\t\tz-index: 10;\n\t}\n\n\t& .remove-icon {\n\t\tcolor: white;\n\t}\n\n\t& .user-nickname {\n\t\tcolor: #52575d;\n\t\tfont-weight: 500;\n\t}\n\n\t& .upload-btn-wrapper {\n\t\twidth: 100%;\n\t\tmargin-top: 12px;\n\t}\n\n\t& .upload-btn {\n\t\twidth: 100%;\n\t}\n\t\n`;\n\nexport const EditNickNameWrapper = styled.div`\n\tbackground-color: #1e1e1e;\n\tmargin-top: 25px;\n\tdisplay: flex;\n\tflex-direction: column;\n\tpadding: 20px;\n\n\n\t& .nick-input-label {\n\t\tmargin-bottom: 10px;\n\t}\n\n\t& .css-1d3z3hw-MuiOutlinedInput-notchedOutline {\n\t\tborder-color: rgba(255, 255, 255, 0.6);\n\t}\n\n\t& .css-md26zr-MuiInputBase-root-MuiOutlinedInput-root:hover .MuiOutlinedInput-notchedOutline {\n\t\tborder-color: rgba(255, 255, 255, 1);\n\t}\n\n\t& .css-1t8l2tu-MuiInputBase-input-MuiOutlinedInput-input {\n\t\tcolor: white;\n\t}\n\n`;\n\nexport const NickNameErrorContainer = styled.div<{ visibility: string }>`\n\tcolor: red; \n\tfont-size: 14px; \n\tmargin-top: 5px;\n\tvisibility: ${(props) => props.visibility};\n`;","import styled from '@emotion/styled';\n\nexport const EditNickNameWrapper = styled.div`\n\tbackground-color: #1e1e1e;\n\tmargin-top: 25px;\n\tdisplay: flex;\n\tflex-direction: column;\n\tpadding: 20px;\n\n\n\t& .nick-input-label {\n\t\tmargin-bottom: 10px;\n\t}\n\n\t& .css-1d3z3hw-MuiOutlinedInput-notchedOutline {\n\t\tborder-color: rgba(255, 255, 255, 0.6);\n\t}\n\n\t& .css-md26zr-MuiInputBase-root-MuiOutlinedInput-root:hover .MuiOutlinedInput-notchedOutline {\n\t\tborder-color: rgba(255, 255, 255, 1);\n\t}\n\n\t& .css-1t8l2tu-MuiInputBase-input-MuiOutlinedInput-input {\n\t\tcolor: white;\n\t}\n\n`;\n\n\nexport const NickNameErrorContainer = styled.div<{ visibility: string }>`\n\tcolor: red; \n\tfont-size: 14px; \n\tmargin-top: 5px;\n\tvisibility: ${(props) => props.visibility};\n`;","import React, { useCallback, useState } from 'react';\nimport useSWR from 'swr';\nimport { IUser } from '@typings/db';\nimport fetcher from '@utils/fetcher';\nimport TextField from '@mui/material/TextField';\nimport { toast } from 'react-toastify';\nimport axios from 'axios';\nimport { EditNickNameWrapper, NickNameErrorContainer } from './style';\n\nconst NickNameChangeField = () => {\n  const { data: myData, mutate: mutateMyData } = useSWR<IUser | null>('/api/users', fetcher);\n  const [changeNickname, setChangeNickname] = useState('');\n  const [isNickError, setIsNickError] = useState(0);\n\n  const onChangeNickname = useCallback((e) => {\n    e.preventDefault();\n    setChangeNickname(e.target.value);\n    setIsNickError(0);\n  }, []);\n\n  const onKeyDownNickname = useCallback(\n    (e) => {\n      if (!changeNickname) return;\n\n      if (changeNickname.length > 10) {\n        setIsNickError(2);\n        return;\n      }\n      if (e.key === 'Enter') {\n        e.preventDefault();\n        axios\n          .get(`/api/users/update-username/${changeNickname}`, {\n            withCredentials: true,\n          })\n          .then((res) => {\n            if (res.data === false) {\n              setIsNickError(1);\n              return;\n            } else {\n              toast.success('Successfully changed your nickname', {\n                autoClose: 3000,\n                position: toast.POSITION.TOP_RIGHT,\n                hideProgressBar: false,\n                closeOnClick: true,\n                pauseOnHover: true,\n                theme: 'colored',\n              });\n              mutateMyData();\n              setChangeNickname('');\n            }\n          })\n          .catch((error) => {\n            toast.error(error.message, {\n              autoClose: 3000,\n              position: toast.POSITION.TOP_RIGHT,\n              hideProgressBar: false,\n              closeOnClick: true,\n              pauseOnHover: true,\n              theme: 'colored',\n            });\n          });\n      }\n    },\n    [mutateMyData, changeNickname],\n  );\n\n  return (\n    <EditNickNameWrapper>\n      <span className=\"nick-input-label\">Edit nickname</span>\n      <TextField\n        value={changeNickname}\n        onChange={onChangeNickname}\n        onKeyUp={onKeyDownNickname}\n        fullWidth\n        label=\"nickname\"\n        id=\"fullWidth\"\n        autoComplete=\"off\"\n      />\n      <NickNameErrorContainer visibility={isNickError === 0 ? 'hidden' : 'visiblle'}>\n        {isNickError && isNickError === 1 ? (\n          <span>This nickname is already in use by another user</span>\n        ) : (\n          <span>Nickname length limit is 10 characters</span>\n        )}\n      </NickNameErrorContainer>\n    </EditNickNameWrapper>\n  );\n};\n\nexport default NickNameChangeField;\n","import React, { useCallback, useEffect, useState } from 'react';\nimport Avatar from '@mui/material/Avatar';\nimport TwoFactorSwitch from '@components/TwoFactorSwitch';\nimport useSWR from 'swr';\nimport { IUser } from '@typings/db';\nimport fetcher from '@utils/fetcher';\nimport PhotoCamera from '@mui/icons-material/PhotoCamera';\nimport Button from '@mui/material/Button';\nimport TextField from '@mui/material/TextField';\nimport axios from 'axios';\nimport IconButton from '@mui/material/IconButton';\nimport CloseIcon from '@mui/icons-material/Close';\nimport { ProfileSettingContainer } from './style';\nimport NickNameChangeField from '@components/NickNameChangeField';\nimport { toast } from 'react-toastify';\n\nconst ProfileSetting = () => {\n  const { data: myData, mutate: mutateMyData } = useSWR<IUser | null>('/api/users', fetcher);\n  const [selectedFile, setSelectedFile] = useState<any>(null);\n  const [imgUrl, setImgUrl] = useState('');\n\n  const onChangeFile = (event: any) => {\n    setSelectedFile(event.target.files);\n  };\n\n  const onClickClearImg = () => {\n    setImgUrl('');\n    setSelectedFile(null);\n  };\n\n  const onClickUploadBtn = useCallback(() => {\n    if (!selectedFile || !selectedFile[0]) return;\n    const formData = new FormData();\n\n    formData.append(\n      'image',\n      selectedFile[0],\n      `${myData?.userId}` + selectedFile[0].name.slice(selectedFile[0]?.name?.indexOf('.')),\n    );\n    const config = {\n      withCredentials: true,\n      headers: {\n        'content-type': 'multipart/form-data',\n      },\n    };\n\n    axios\n      .post('/api/users/upload', formData, config)\n      .then((res) => {\n        toast.success('Successfully changed your profile picture', {\n          autoClose: 3000,\n          position: toast.POSITION.TOP_RIGHT,\n          hideProgressBar: false,\n          closeOnClick: true,\n          pauseOnHover: true,\n          theme: 'colored',\n        });\n        mutateMyData();\n      })\n      .catch((error) => {\n        toast.error(error.message, {\n          autoClose: 3000,\n          position: toast.POSITION.TOP_RIGHT,\n          hideProgressBar: false,\n          closeOnClick: true,\n          pauseOnHover: true,\n          theme: 'colored',\n        });\n      });\n  }, [myData, selectedFile]);\n\n  useEffect(() => {\n    preview();\n  });\n\n  const preview = () => {\n    if (!selectedFile || !selectedFile[0]) return false;\n    const reader = new FileReader();\n\n    reader.onload = () => {\n      setImgUrl(`${reader.result}`);\n    };\n    reader.readAsDataURL(selectedFile[0]);\n  };\n  return (\n    <ProfileSettingContainer>\n      <div className=\"security-wrapper\">\n        <div>Security</div>\n        <div className=\"two-factor-wrapper\">\n          <TwoFactorSwitch />\n          <span>2-Factor Authentication</span>\n        </div>\n      </div>\n      <div className=\"user-avatar-container\">\n        <div className=\"user-avatar-wrapper\">\n          <div className=\"header-avatar\">Avatar</div>\n          <div className=\"user-avatar-upload-section\">\n            <div className=\"avatar-upload-wrapper\">\n              <label htmlFor=\"contained-button-file\">\n                <input\n                  className=\"upload-input\"\n                  accept=\"image/*\"\n                  id=\"contained-button-file\"\n                  multiple\n                  type=\"file\"\n                  onChange={onChangeFile}\n                />\n                <Avatar className=\"avatar\" src={imgUrl ? imgUrl : myData?.profile} alt=\"Avatar\" />\n              </label>\n              <div className=\"remove-btn \" onClick={onClickClearImg}>\n                <IconButton className=\"remove-icon\">\n                  <CloseIcon />\n                </IconButton>\n              </div>\n            </div>\n            <span>{myData?.userId}</span>\n            <span className=\"user-nickname\">{myData?.username}</span>\n            <div className=\"upload-btn-wrapper\">\n              <Button\n                className=\"upload-btn\"\n                variant=\"contained\"\n                startIcon={<PhotoCamera />}\n                component=\"span\"\n                onClick={onClickUploadBtn}\n              >\n                Upload\n              </Button>\n            </div>\n          </div>\n        </div>\n      </div>\n      <NickNameChangeField />\n    </ProfileSettingContainer>\n  );\n};\n\nexport default ProfileSetting;\n"],"names":["TwoFactorSwitchBack","styled","TwoFactorSwitchContainer","isTwoFactor","useSWR","fetcher","data","useState","checked","setChecked","imgsrc","setImgsrc","isQRModal","setisQRModal","OTPvalue","setOTPvalue","useEffect","onSubmitOTPvalue","useCallback","e","key","axios","config","then","toast","autoClose","position","hideProgressBar","closeOnClick","pauseOnHover","theme","catch","error","message","onChangeOTPinput","target","value","handleChange","event","withCredentials","responseType","res","window","URL","createObjectURL","Blob","type","headers","onClickQRModal","onClick","IconButton","className","Close","src","TextField","onKeyPress","onChange","id","label","variant","autoComplete","Switch","inputProps","ProfileSettingContainer","props","visibility","EditNickNameWrapper","NickNameErrorContainer","mutateMyData","mutate","changeNickname","setChangeNickname","isNickError","setIsNickError","onChangeNickname","preventDefault","onKeyDownNickname","length","onKeyUp","fullWidth","myData","selectedFile","setSelectedFile","imgUrl","setImgUrl","onClickUploadBtn","formData","FormData","append","userId","name","slice","indexOf","preview","reader","FileReader","onload","result","readAsDataURL","htmlFor","accept","multiple","files","Avatar","profile","alt","username","Button","startIcon","PhotoCamera","component"],"sourceRoot":""}